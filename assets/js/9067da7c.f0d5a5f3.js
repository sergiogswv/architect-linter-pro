"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[5354],{6358(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"technical/testing-guide","title":"Testing Guide","description":"This guide provides comprehensive information on running, writing, and understanding tests for the architect-linter-pro project.","source":"@site/docs/technical/testing-guide.md","sourceDirName":"technical","slug":"/technical/testing-guide","permalink":"/architect-linter-pro/docs/technical/testing-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/sergiogswv/architect-linter-pro/tree/main/website/docs/technical/testing-guide.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Testing Guide","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Performance Guide","permalink":"/architect-linter-pro/docs/technical/performance"},"next":{"title":"Error Handling & Logging","permalink":"/architect-linter-pro/docs/technical/error-handling"}}');var t=s(4848),r=s(8453);const l={title:"Testing Guide",sidebar_position:2},c="Testing Guide for Contributors",o={},a=[{value:"Table of Contents",id:"table-of-contents",level:2},{value:"Running Tests Locally",id:"running-tests-locally",level:2},{value:"Run all tests:",id:"run-all-tests",level:3},{value:"Run specific test file:",id:"run-specific-test-file",level:3},{value:"Run unit tests only:",id:"run-unit-tests-only",level:3},{value:"Run integration tests:",id:"run-integration-tests",level:3},{value:"Run E2E tests:",id:"run-e2e-tests",level:3},{value:"Run specific test:",id:"run-specific-test",level:3},{value:"Run tests with output:",id:"run-tests-with-output",level:3},{value:"Run tests in single thread (useful for debugging):",id:"run-tests-in-single-thread-useful-for-debugging",level:3},{value:"Coverage",id:"coverage",level:2},{value:"Generate coverage report:",id:"generate-coverage-report",level:3},{value:"View coverage by module:",id:"view-coverage-by-module",level:3},{value:"View HTML report:",id:"view-html-report",level:3},{value:"Coverage with specific filters:",id:"coverage-with-specific-filters",level:3},{value:"Benchmarks",id:"benchmarks",level:2},{value:"Run all benchmarks:",id:"run-all-benchmarks",level:3},{value:"Run specific benchmark:",id:"run-specific-benchmark",level:3},{value:"Save baseline:",id:"save-baseline",level:3},{value:"Compare against baseline:",id:"compare-against-baseline",level:3},{value:"Available Benchmarks",id:"available-benchmarks",level:3},{value:"Platform-Specific Tests",id:"platform-specific-tests",level:2},{value:"Platform Guards",id:"platform-guards",level:3},{value:"Platform-Specific Examples",id:"platform-specific-examples",level:3},{value:"Known Platform-Specific Tests",id:"known-platform-specific-tests",level:3},{value:"Writing Tests",id:"writing-tests",level:2},{value:"Unit Tests",id:"unit-tests",level:3},{value:"Integration Tests",id:"integration-tests",level:3},{value:"E2E Tests",id:"e2e-tests",level:3},{value:"Using Test Utilities",id:"using-test-utilities",level:3},{value:"Test Organization",id:"test-organization",level:2},{value:"Test File Naming Conventions",id:"test-file-naming-conventions",level:3},{value:"Test Fixtures",id:"test-fixtures",level:3},{value:"CI/CD Integration",id:"cicd-integration",level:2},{value:"CI automatically runs:",id:"ci-automatically-runs",level:3},{value:"Coverage Goals",id:"coverage-goals",level:3},{value:"Viewing Coverage in CI",id:"viewing-coverage-in-ci",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Test fails intermittently",id:"test-fails-intermittently",level:3},{value:"Slow tests",id:"slow-tests",level:3},{value:"Coverage not updating",id:"coverage-not-updating",level:3},{value:"Tests fail in CI but pass locally",id:"tests-fail-in-ci-but-pass-locally",level:3},{value:"&quot;No such file or directory&quot; errors",id:"no-such-file-or-directory-errors",level:3},{value:"Clippy warnings in tests",id:"clippy-warnings-in-tests",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"DO:",id:"do",level:3},{value:"DON&#39;T:",id:"dont",level:3},{value:"Additional Resources",id:"additional-resources",level:2},{value:"Quick Reference",id:"quick-reference",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"testing-guide-for-contributors",children:"Testing Guide for Contributors"})}),"\n",(0,t.jsx)(n.p,{children:"This guide provides comprehensive information on running, writing, and understanding tests for the architect-linter-pro project."}),"\n",(0,t.jsx)(n.h2,{id:"table-of-contents",children:"Table of Contents"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#running-tests-locally",children:"Running Tests Locally"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#coverage",children:"Coverage"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#benchmarks",children:"Benchmarks"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#platform-specific-tests",children:"Platform-Specific Tests"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#writing-tests",children:"Writing Tests"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#test-organization",children:"Test Organization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#cicd-integration",children:"CI/CD Integration"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#troubleshooting",children:"Troubleshooting"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"running-tests-locally",children:"Running Tests Locally"}),"\n",(0,t.jsx)(n.h3,{id:"run-all-tests",children:"Run all tests:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo test\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-specific-test-file",children:"Run specific test file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo test --test test_scoring\ncargo test --test test_parsers\ncargo test --test test_cli\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-unit-tests-only",children:"Run unit tests only:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo test --lib\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-integration-tests",children:"Run integration tests:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Multi-file analysis integration test\ncargo test --test test_multi_file_analysis\n\n# Scoring integration test\ncargo test --test test_scoring_integration\n\n# Analyzer integration test\ncargo test --test test_analyzer\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-e2e-tests",children:"Run E2E tests:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo test --test test_e2e_github_action\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-specific-test",children:"Run specific test:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo test test_calculate_health_score_with_no_violations\ncargo test test_ts_parser_simple_function\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-tests-with-output",children:"Run tests with output:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Show test output\ncargo test -- --nocapture\n\n# Show test output with colors\ncargo test -- --nocapture --color=always\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-tests-in-single-thread-useful-for-debugging",children:"Run tests in single thread (useful for debugging):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo test -- --test-threads=1\n"})}),"\n",(0,t.jsx)(n.h2,{id:"coverage",children:"Coverage"}),"\n",(0,t.jsx)(n.h3,{id:"generate-coverage-report",children:"Generate coverage report:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Unix/Linux/macOS\n./scripts/coverage.sh\n\n# Windows\nscripts\\coverage.bat\n\n# Or directly\ncargo tarpaulin --verbose --all-features --timeout 300 --out xml\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This generates a ",(0,t.jsx)(n.code,{children:"cobertura.xml"})," file in the root directory."]}),"\n",(0,t.jsx)(n.h3,{id:"view-coverage-by-module",children:"View coverage by module:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo tarpaulin --exclude-files -- --test\n"})}),"\n",(0,t.jsx)(n.h3,{id:"view-html-report",children:"View HTML report:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Generate HTML coverage report\ncargo tarpaulin --out Html --output-dir target/coverage\n\n# View the report (platform-specific)\nopen target/coverage/index.html              # macOS\nxdg-open target/coverage/index.html          # Linux\nstart target/coverage/index.html             # Windows\n"})}),"\n",(0,t.jsx)(n.h3,{id:"coverage-with-specific-filters",children:"Coverage with specific filters:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Coverage for specific module\ncargo tarpaulin --lib -- --test scoring\n\n# Exclude test files from coverage\ncargo tarpaulin --exclude-files "tests/*"\n'})}),"\n",(0,t.jsx)(n.h2,{id:"benchmarks",children:"Benchmarks"}),"\n",(0,t.jsx)(n.p,{children:"The project includes benchmarking tests to track performance over time."}),"\n",(0,t.jsx)(n.h3,{id:"run-all-benchmarks",children:"Run all benchmarks:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo bench\n"})}),"\n",(0,t.jsx)(n.h3,{id:"run-specific-benchmark",children:"Run specific benchmark:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo bench --bench parsing_bench\ncargo bench --bench performance_bench\n"})}),"\n",(0,t.jsx)(n.h3,{id:"save-baseline",children:"Save baseline:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo bench -- --save-baseline main\n"})}),"\n",(0,t.jsx)(n.h3,{id:"compare-against-baseline",children:"Compare against baseline:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cargo bench -- --baseline main\n"})}),"\n",(0,t.jsx)(n.h3,{id:"available-benchmarks",children:"Available Benchmarks"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"parsing_bench"})}),": Benchmarks TypeScript and Python parsing performance"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Small files (~10 lines)"}),"\n",(0,t.jsx)(n.li,{children:"Medium files (~100 lines)"}),"\n",(0,t.jsx)(n.li,{children:"Large files (~500 lines)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"performance_bench"})}),": Benchmarks scoring engine performance"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Single violation scoring"}),"\n",(0,t.jsx)(n.li,{children:"Multiple violations scoring"}),"\n",(0,t.jsx)(n.li,{children:"Health score calculation"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"platform-specific-tests",children:"Platform-Specific Tests"}),"\n",(0,t.jsx)(n.p,{children:"Some tests only run on specific platforms due to filesystem differences or other platform-specific behavior."}),"\n",(0,t.jsx)(n.h3,{id:"platform-guards",children:"Platform Guards"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"#[cfg(unix)]"})," - Linux and macOS only"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"#[cfg(not(windows))]"})," - Linux and macOS only (Windows excluded)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"#[cfg(windows)]"})," - Windows only"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'#[cfg(target_os = "macos")]'})," - macOS only"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"platform-specific-examples",children:"Platform-Specific Examples"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test that skips on Windows:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"#[test]\n#[cfg(not(windows))]\nfn test_ast_dropped_after_analysis() {\n    // Filesystem-specific test that fails on Windows\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test that only runs on Windows:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"#[test]\n#[cfg(windows)]\nfn test_windows_path_handling() {\n    // Windows-specific path handling\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"known-platform-specific-tests",children:"Known Platform-Specific Tests"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"test_ast_dropped_after_analysis"})," - Skipped on Windows due to filesystem differences in file locking"]}),"\n",(0,t.jsx)(n.li,{children:"E2E tests work on all platforms (no platform guards)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"writing-tests",children:"Writing Tests"}),"\n",(0,t.jsx)(n.h3,{id:"unit-tests",children:"Unit Tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Location:"})," ",(0,t.jsx)(n.code,{children:"tests/unit/"})," directory (for lib-level unit tests) or inline in source files"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Guidelines:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"NO filesystem access (use mocks or pure functions)"}),"\n",(0,t.jsx)(n.li,{children:"Fast, isolated, parallel execution"}),"\n",(0,t.jsx)(n.li,{children:"Test business logic in isolation"}),"\n",(0,t.jsxs)(n.li,{children:["Use descriptive test names: ",(0,t.jsx)(n.code,{children:"test_<feature>_<scenario>_<expected_outcome>"})]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'#[test]\nfn test_calculate_health_score_with_no_violations() {\n    let violations = vec![];\n    let score = calculate_health_score(&violations, 100.0);\n    assert_eq!(score, 100.0);\n}\n\n#[test]\nfn test_calculate_health_score_with_critical_violation() {\n    let violations = vec![Violation {\n        severity: Severity::Critical,\n        line: 10,\n        message: "Test violation".to_string(),\n    }];\n    let score = calculate_health_score(&violations, 100.0);\n    assert!(score &lt; 100.0);\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Edge Cases to Test:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Empty inputs"}),"\n",(0,t.jsx)(n.li,{children:"Single vs multiple items"}),"\n",(0,t.jsx)(n.li,{children:"Boundary conditions (max values, min values)"}),"\n",(0,t.jsx)(n.li,{children:"Error conditions"}),"\n",(0,t.jsx)(n.li,{children:"Invalid inputs"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"integration-tests",children:"Integration Tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Location:"})," ",(0,t.jsx)(n.code,{children:"tests/"})," directory with names like ",(0,t.jsx)(n.code,{children:"test_*_integration.rs"})," or ",(0,t.jsx)(n.code,{children:"tests/integration/"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Guidelines:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Can use tempfile for test data"}),"\n",(0,t.jsx)(n.li,{children:"May need platform guards for filesystem issues"}),"\n",(0,t.jsx)(n.li,{children:"Test multiple components working together"}),"\n",(0,t.jsxs)(n.li,{children:["Use common test utilities from ",(0,t.jsx)(n.code,{children:"tests/common/mod.rs"})]}),"\n",(0,t.jsx)(n.li,{children:"Test real-world scenarios"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'use tempfile::TempDir;\nuse crate::common::TestProject;\n\n#[test]\nfn test_multi_file_scoring_integration() {\n    let temp_dir = TestProject::new();\n\n    // Create test files\n    temp_dir.create_file("src/user.ts", "export class User {}");\n    temp_dir.create_file("src/user.service.ts", "export class UserService {}");\n    temp_dir.create_minimal_config();\n\n    // Run analysis\n    let result = analyze_directory(temp_dir.path()).unwrap();\n\n    // Verify integration\n    assert_eq!(result.files_analyzed, 2);\n    assert!(result.health_score > 0.0);\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"e2e-tests",children:"E2E Tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Location:"})," ",(0,t.jsx)(n.code,{children:"tests/e2e/"})," or ",(0,t.jsx)(n.code,{children:"tests/test_e2e_*.rs"})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Guidelines:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Test complete workflows by running the actual binary"}),"\n",(0,t.jsxs)(n.li,{children:["Use real projects from ",(0,t.jsx)(n.code,{children:"tests/fixtures/"})," if available"]}),"\n",(0,t.jsx)(n.li,{children:"Platform guards for flaky tests"}),"\n",(0,t.jsx)(n.li,{children:"Test CLI behavior, exit codes, and output format"}),"\n",(0,t.jsx)(n.li,{children:"Verify end-to-end user journeys"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'use std::process::Command;\n\n#[test]\nfn test_github_action_workflow_happy_path() {\n    let output = Command::new("cargo")\n        .args(["run", "--release", "--", "."])\n        .output()\n        .expect("Failed to execute");\n\n    // Check exit code\n    assert!(output.status.success());\n\n    // Check output contains expected content\n    let stdout = String::from_utf8(output.stdout).unwrap();\n    assert!(stdout.contains("Analysis complete"));\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"using-test-utilities",children:"Using Test Utilities"}),"\n",(0,t.jsxs)(n.p,{children:["The project provides common test utilities in ",(0,t.jsx)(n.code,{children:"tests/common/mod.rs"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'use crate::common::{TestProject, forbidden_rule, join_rules};\n\n// Create a temporary test project\nlet project = TestProject::new();\n\n// Create files\nproject.create_file("src/domain/user.ts", "export class User {}");\n\n// Create config\nproject.create_config("MVC", 100, &forbidden_rule("/domain/", "/infrastructure/"));\n\n// Access project path\nlet project_path = project.path();\n'})}),"\n",(0,t.jsx)(n.h2,{id:"test-organization",children:"Test Organization"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"tests/\n\u251c\u2500\u2500 common/               # Shared test utilities\n\u2502   \u2514\u2500\u2500 mod.rs           # TestProject, helpers, fixtures\n\u251c\u2500\u2500 fixtures/            # Test data\n\u2502   \u251c\u2500\u2500 projects/        # Sample projects for testing\n\u2502   \u251c\u2500\u2500 samples/         # Code snippets (TS, Py, etc.)\n\u2502   \u251c\u2500\u2500 configs/         # Architecture config examples\n\u2502   \u251c\u2500\u2500 circular_deps/   # Projects with circular dependencies\n\u2502   \u251c\u2500\u2500 forbidden_imports/ # Projects testing forbidden import rules\n\u2502   \u251c\u2500\u2500 long_functions/  # Projects with long functions\n\u2502   \u2514\u2500\u2500 perfect_* / mixed_* # Various test scenarios\n\u251c\u2500\u2500 integration/         # Integration test modules\n\u2502   \u2514\u2500\u2500 mod.rs\n\u251c\u2500\u2500 unit/               # Unit test modules\n\u2502   \u2514\u2500\u2500 mod.rs\n\u251c\u2500\u2500 e2e/                # End-to-end tests\n\u2502   \u2514\u2500\u2500 github_action/\n\u251c\u2500\u2500 snapshots/          # Insta snapshot files\n\u251c\u2500\u2500 test_*.rs           # Unit and integration tests\n\u2514\u2500\u2500 README.md           # Test documentation\n"})}),"\n",(0,t.jsx)(n.h3,{id:"test-file-naming-conventions",children:"Test File Naming Conventions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"test_<module>.rs"})," - General tests for a module (e.g., ",(0,t.jsx)(n.code,{children:"test_scoring.rs"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"test_<module>_integration.rs"})," - Integration tests (e.g., ",(0,t.jsx)(n.code,{children:"test_scoring_integration.rs"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"test_unit_<feature>.rs"})," - Specific unit tests (e.g., ",(0,t.jsx)(n.code,{children:"test_unit_scoring_edge_cases.rs"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"test_e2e_<workflow>.rs"})," - End-to-end tests (e.g., ",(0,t.jsx)(n.code,{children:"test_e2e_github_action.rs"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"test-fixtures",children:"Test Fixtures"}),"\n",(0,t.jsxs)(n.p,{children:["Available test fixtures in ",(0,t.jsx)(n.code,{children:"tests/fixtures/"}),":"]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"perfect_project/"})})," - Clean codebase with no violations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"mixed_issues/"})})," - Various types of violations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"forbidden_imports/"})})," - Tests for forbidden import rules"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"long_functions/"})})," - Tests for function length violations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"circular_deps/"})})," - Tests for circular dependency detection"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"failing_hexagonal/"})})," - Tests hexagonal architecture violations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"mixed_clean_arch/"})})," - Tests clean architecture violations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"perfect_mvc_project/"})})," - Clean MVC architecture example"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,t.jsx)(n.h3,{id:"ci-automatically-runs",children:"CI automatically runs:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Test Suite"})," - All tests on Linux, macOS, Windows"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Unit tests"}),"\n",(0,t.jsx)(n.li,{children:"Integration tests"}),"\n",(0,t.jsx)(n.li,{children:"E2E tests"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Linting"})," - Clippy checks"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"cargo clippy --all-targets --all-features -- -W clippy::all"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Formatting"})," - rustfmt checks"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"cargo fmt --all -- --check"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Build"})," - Verify compilation on all platforms"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"cargo build --release"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Coverage"})," - Code coverage report (Linux only)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Generates ",(0,t.jsx)(n.code,{children:"cobertura.xml"})]}),"\n",(0,t.jsx)(n.li,{children:"Uploads to Codecov"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Security Audit"})," - Dependency vulnerability checks"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"cargo audit"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"coverage-goals",children:"Coverage Goals"}),"\n",(0,t.jsx)(n.p,{children:"Current baseline: 39.22% overall (as of v4.1.0)"}),"\n",(0,t.jsx)(n.p,{children:"Target coverage:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Scoring module"}),": >90% coverage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Parser modules"}),": >80% coverage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Overall"}),": >75% coverage"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"viewing-coverage-in-ci",children:"Viewing Coverage in CI"}),"\n",(0,t.jsx)(n.p,{children:"Coverage reports are available:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"In GitHub Actions summary (CI logs)"}),"\n",(0,t.jsx)(n.li,{children:"Via Codecov (if configured)"}),"\n",(0,t.jsx)(n.li,{children:"Locally by generating reports"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"test-fails-intermittently",children:"Test fails intermittently"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptoms:"})," Test passes sometimes, fails other times"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Check if it needs platform guard (",(0,t.jsx)(n.code,{children:"#[cfg(not(windows))]"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"cargo test -- --test-threads=1"})," to run serially"]}),"\n",(0,t.jsx)(n.li,{children:"Check for filesystem race conditions"}),"\n",(0,t.jsx)(n.li,{children:"Look for timing-dependent tests"}),"\n",(0,t.jsx)(n.li,{children:"Add proper cleanup or isolation"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example fix:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"#[test]\n#[cfg(not(windows))]  // Add platform guard\nfn test_filesystem_behavior() {\n    // Test code\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"slow-tests",children:"Slow tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptoms:"})," Tests take too long to run"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"cargo test -- --nocapture"})," to see progress"]}),"\n",(0,t.jsxs)(n.li,{children:["Profile with ",(0,t.jsx)(n.code,{children:"cargo bench"})," for benchmarks"]}),"\n",(0,t.jsx)(n.li,{children:"Check for unnecessary I/O operations"}),"\n",(0,t.jsx)(n.li,{children:"Consider using mocks instead of real filesystem"}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"#[ignore]"})," to very slow tests and run manually"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"#[test]\n#[ignore]  // Run with: cargo test -- --ignored\nfn test_very_slow_operation() {\n    // Slow test code\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"coverage-not-updating",children:"Coverage not updating"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptoms:"})," Coverage report doesn't show new changes"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Delete ",(0,t.jsx)(n.code,{children:"Cargo.lock"})," and regenerate: ",(0,t.jsx)(n.code,{children:"rm Cargo.lock && cargo generate-lockfile"})]}),"\n",(0,t.jsxs)(n.li,{children:["Clear build cache: ",(0,t.jsx)(n.code,{children:"cargo clean"})]}),"\n",(0,t.jsxs)(n.li,{children:["Check tarpaulin version compatibility: ",(0,t.jsx)(n.code,{children:"cargo tarpaulin --version"})]}),"\n",(0,t.jsxs)(n.li,{children:["Reinstall tarpaulin: ",(0,t.jsx)(n.code,{children:"cargo install cargo-tarpaulin --force"})]}),"\n",(0,t.jsxs)(n.li,{children:["Ensure you're running with ",(0,t.jsx)(n.code,{children:"--all-features"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"tests-fail-in-ci-but-pass-locally",children:"Tests fail in CI but pass locally"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptoms:"})," Tests work on your machine but fail in CI"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check platform differences (Linux vs macOS vs Windows)"}),"\n",(0,t.jsxs)(n.li,{children:["Ensure all dependencies are in ",(0,t.jsx)(n.code,{children:"Cargo.lock"})]}),"\n",(0,t.jsx)(n.li,{children:"Check for environment-specific assumptions"}),"\n",(0,t.jsx)(n.li,{children:"Look for hardcoded paths"}),"\n",(0,t.jsx)(n.li,{children:"Ensure test fixtures are committed"}),"\n",(0,t.jsx)(n.li,{children:"Check for timezone or locale dependencies"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"no-such-file-or-directory-errors",children:'"No such file or directory" errors'}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptoms:"})," Tests can't find files or directories"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use absolute paths or proper relative paths"}),"\n",(0,t.jsx)(n.li,{children:"Ensure fixtures exist in repository"}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"TestProject"})," from ",(0,t.jsx)(n.code,{children:"tests/common/mod.rs"})]}),"\n",(0,t.jsx)(n.li,{children:"Check that temporary directories are properly created"}),"\n",(0,t.jsx)(n.li,{children:"Verify working directory assumptions"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"clippy-warnings-in-tests",children:"Clippy warnings in tests"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Symptoms:"})," Clippy fails on test code"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Fix the warning if it's legitimate"}),"\n",(0,t.jsxs)(n.li,{children:["Add ",(0,t.jsx)(n.code,{children:"#[allow(clippy::warning_name)]"})," if necessary for test"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"#[expect(clippy::warning_name)]"})," (Rust 2024+)"]}),"\n",(0,t.jsx)(n.li,{children:"Ensure test code follows best practices"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Example:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"#[test]\n#[allow(clippy::too_many_arguments)]\nfn test_function_with_many_params() {\n    // Test code\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"do",children:"DO:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Write descriptive test names that explain what is being tested"}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"TestProject"})," for filesystem-based tests"]}),"\n",(0,t.jsx)(n.li,{children:"Test edge cases and error conditions"}),"\n",(0,t.jsx)(n.li,{children:"Keep tests fast and isolated"}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"tempfile"})," for temporary directories"]}),"\n",(0,t.jsx)(n.li,{children:"Add platform guards when needed"}),"\n",(0,t.jsx)(n.li,{children:"Follow naming conventions"}),"\n",(0,t.jsx)(n.li,{children:"Document complex test scenarios"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dont",children:"DON'T:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Use hardcoded absolute paths"}),"\n",(0,t.jsx)(n.li,{children:"Assume specific working directory"}),"\n",(0,t.jsx)(n.li,{children:"Write slow integration tests for what should be unit tests"}),"\n",(0,t.jsx)(n.li,{children:"Ignore flaky tests - fix them or add guards"}),"\n",(0,t.jsx)(n.li,{children:"Commit test artifacts (snapshots\u9664\u5916)"}),"\n",(0,t.jsx)(n.li,{children:"Test implementation details instead of behavior"}),"\n",(0,t.jsxs)(n.li,{children:["Overuse ",(0,t.jsx)(n.code,{children:"unwrap()"})," in tests - prefer proper error assertions"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://doc.rust-lang.org/cargo/guide/tests.html",children:"Cargo Book - Testing"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://doc.rust-lang.org/book/ch11-00-testing.html",children:"Rust Book - Writing Automated Tests"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://insta.rs/",children:"Insta - Snapshot Testing"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/xd009642/tarpaulin",children:"Tarpaulin - Code Coverage"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://bheisler.github.io/criterion.rs/book/",children:"Criterion - Benchmarking"})}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Run all tests\ncargo test\n\n# Run tests with output\ncargo test -- --nocapture\n\n# Run single-threaded\ncargo test -- --test-threads=1\n\n# Generate coverage\n./scripts/coverage.sh  # Unix\nscripts\\coverage.bat  # Windows\n\n# Run benchmarks\ncargo bench\n\n# Format code\ncargo fmt\n\n# Check linting\ncargo clippy --all-targets --all-features\n\n# Clean build\ncargo clean\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>c});var i=s(6540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);